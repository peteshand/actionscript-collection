package net.peteshand.utils{	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;	import net.peteshand.utils.Drag;	public class Scroller extends MovieClip	{		private var drag:Drag;				private var scrollBar:MovieClip;		private var scrollArea:MovieClip;		private var scrollUp:MovieClip;		private var scrollDown:MovieClip;				private var startX:int = 0;		private var startY:int = 0;		private var displayWidth:int = 0;		private var displayHeight:int = 0;				private var PressingUp:Boolean = false;		private var PressingDown:Boolean = false;		private var scrollUpSpeed:int = 5;		private var scrollDownSpeed:int = 5;				public function Scroller():void		{			drag = new Drag();		}		public function addScrollBar(_scrollBar:MovieClip,minX:int=0,maxX:int=0,minY:int=0,maxY:int=0):void		{			scrollBar = _scrollBar;			drag.DragBetween(scrollBar,minX,maxX,minY,maxY);			drag.addEventListener(Event.CHANGE, OnDrag);		}		private function OnDrag(event:Event):void		{			if (scrollArea != null){				scrollArea.y = startY - (drag.py * (scrollArea.height-displayHeight));			}		}		public function addScrollArea(_scrollArea:MovieClip, _displayWidth:int, _displayHeight:int):void		{			scrollArea = _scrollArea;			startX = scrollArea.x;			startY = scrollArea.y;			displayWidth = _displayWidth;			displayHeight = _displayHeight;						checkDisplay();		}		public function addScrollUp(_scrollUp:MovieClip, _scrollUpSpeed:int=5):void		{			scrollUpSpeed = _scrollUpSpeed;			scrollUp = _scrollUp;			scrollUp.buttonMode = true;			scrollUp.addEventListener(MouseEvent.MOUSE_DOWN, pressUp);			checkDisplay();		}		public function addScrollDown(_scrollDown:MovieClip, _scrollDownSpeed:int=5):void		{			scrollDownSpeed = _scrollDownSpeed;			scrollDown = _scrollDown;			scrollDown.buttonMode = true;			scrollDown.addEventListener(MouseEvent.MOUSE_DOWN, pressDown);			checkDisplay();		}				private function checkDisplay():void		{			if (scrollArea != null){				if (scrollArea.height < displayHeight){					if (scrollBar != null) scrollBar.visible = false;					if (scrollUp != null) scrollUp.visible = false;					if (scrollDown != null) scrollDown.visible = false;				}			}		}				private function pressUp(event:MouseEvent):void		{			PressingUp = true;			addEventListener(Event.ENTER_FRAME, updateScroll);			scrollUp.stage.addEventListener(MouseEvent.MOUSE_UP, releaseUp);		}		private function pressDown(event:MouseEvent):void		{			PressingDown = true;			addEventListener(Event.ENTER_FRAME, updateScroll);			scrollDown.stage.addEventListener(MouseEvent.MOUSE_UP, releaseDown);		}		private function releaseUp(event:MouseEvent):void		{			PressingUp = false;			removeEventListener(Event.ENTER_FRAME, updateScroll);			scrollUp.stage.removeEventListener(MouseEvent.MOUSE_UP, releaseUp);		}		private function releaseDown(event:MouseEvent):void		{			PressingDown = false;			removeEventListener(Event.ENTER_FRAME, updateScroll);			scrollDown.stage.removeEventListener(MouseEvent.MOUSE_UP, releaseDown);		}		private function updateScroll(event:Event):void		{			if (PressingUp){				drag.y -= scrollUpSpeed;			}			else if (PressingDown){				drag.y += scrollDownSpeed;			}		}	}}